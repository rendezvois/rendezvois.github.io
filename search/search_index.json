{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the Nacho Wiki. # This wiki will cover various concepts, issues, and step-by-step tutorials relating to the following topics. Video | Audio | Subtitles | Demuxing & Muxing # Click on the tabs in the top bar to start exploring. # Keyboard Shortcuts: # Global: This mode is active when search is not focused and when there's no other focused element that is susceptible to keyboard input. The following keys are bound: F , S , / : open search dialog P , , : go to previous page N , . : go to next page Search Mode: This mode is active when the search is focused . It provides several key bindings to make search accessible and navigable via keyboard: Down , Up : select next / previous result Esc , Tab : close search dialog Enter : follow selected result","title":"Home"},{"location":"#welcome-to-the-nacho-wiki","text":"This wiki will cover various concepts, issues, and step-by-step tutorials relating to the following topics.","title":"Welcome to the Nacho Wiki."},{"location":"#video-audio-subtitles-demuxing-muxing","text":"","title":" Video\u00a0\u00a0\u00a0\u00a0|\u00a0\u00a0\u00a0\u00a0 Audio\u00a0\u00a0\u00a0\u00a0|\u00a0\u00a0\u00a0\u00a0 Subtitles\u00a0\u00a0\u00a0\u00a0|\u00a0\u00a0\u00a0\u00a0 Demuxing &amp; Muxing"},{"location":"#click-on-the-tabs-in-the-top-bar-to-start-exploring","text":"","title":"Click on the tabs in the top bar to start exploring."},{"location":"#keyboard-shortcuts","text":"Global: This mode is active when search is not focused and when there's no other focused element that is susceptible to keyboard input. The following keys are bound: F , S , / : open search dialog P , , : go to previous page N , . : go to next page Search Mode: This mode is active when the search is focused . It provides several key bindings to make search accessible and navigable via keyboard: Down , Up : select next / previous result Esc , Tab : close search dialog Enter : follow selected result","title":" Keyboard Shortcuts:"},{"location":"demuxing/kino-lorber/","text":"How to demux Kino Lorber Blu-ray Discs properly # Introduction to the problem: # Most Kino Lorber blu-ray discs need a special technique to demux the streams properly. Many distributors insert a few seconds long intro before the movie starts. This intro contains their logo and company name. However, Kino Lorber does it in a unique way unlike any other distributor, where their intro is silent and there is no audio track . Due to this, when you demux these discs, the audio of the main movie gets shifted earlier to the start of the intro. The same thing happens to the subtitles. The result is that you end up with a file which is now out of sync with both the audio and the subtitles. How to identify if the disc needs special demuxing: # Not every Kino Lorber disc is authored in this way. Some do not have the intro. For instance, their \"Kino Classics\" line of releases are generally not authored in this way (or perhaps never). You need the special demux technique only if the disc has this 11 second intro before the movie. The length of the intro is always 264 frames, which at 23.976 FPS (or 24000/1001 FPS) is 11011ms. Use BDInfo , eac3to or mediainfo to see the contents of the main playlist on the disc. BDInfo Program BDInfo Scan Output eac3to mediainfo Load the folder in the BDInfo application. If there is an 11 second file above the main movie m2ts, that is the intro. Same thing can be done with the FULL (unabridged) BDInfo text output. This output is produced by both the regular BDInfo program and the CLI versions. The full output contains the list of the files that the playlist is made up of. Again, look for an 11 second long file above the main movie. Look for the highlighted line in the below output: DISC INFO: Disc Title: Sample Disc Disc Label: Sample Disc Disc Size: 20,000,000,000 bytes Protection: AACS BDInfo: 0.7.5.5 PLAYLIST REPORT: Name: 00004.MPLS Length: 1:10:00.000 (h:m:s.ms) Size: 20,000,000,000 bytes Total Bitrate: 25.00 Mbps VIDEO: Codec Bitrate Description ----- ------- ----------- MPEG-4 AVC Video 20000 kbps 1080p / 23.976 fps / 16:9 / High Profile 4.1 AUDIO: Codec Language Bitrate Description ----- -------- ------- ----------- DTS-HD Master Audio English 1800 kbps 2.0 / 48 kHz / 1800 kbps / 16-bit (DTS Core: 2.0 / 48 kHz / 1509 kbps / 16-bit) Dolby Digital Audio English 192 kbps 2.0 / 48 kHz / 192 kbps / DN -31dB SUBTITLES: Codec Language Bitrate Description ----- -------- ------- ----------- Presentation Graphics English 25.000 kbps FILES: Name Time In Length Size Total Bitrate ---- ------- ------ ---- ------------- 00010.M2TS 0:00:00.000 0:00:11.010 712,704 518 00004.M2TS 0:00:11.010 1:10:00.000 20,000,000,000 20,000 00000.M2TS 1:10:00.000 0:00:01.000 18,432 147 CHAPTERS: Number Time In Length Avg Video Rate Max 1-Sec Rate Max 1-Sec Time Max 5-Sec Rate Max 5-Sec Time Max 10Sec Rate Max 10Sec Time Avg Frame Size Max Frame Size Max Frame Time ------ ------- ------ -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- 1 0:00:00.000 0:07:39.709 29,137 kbps 60,233 kbps 00:00:10.343 34,685 kbps 00:00:10.093 33,485 kbps 00:03:51.231 151,895 bytes 613,283 bytes 00:06:25.051 2 0:07:39.709 0:06:54.789 30,063 kbps 41,644 kbps 00:14:02.925 34,095 kbps 00:11:06.916 33,755 kbps 00:11:06.916 156,737 bytes 675,345 bytes 00:14:02.967 3 0:14:34.498 0:07:53.890 30,089 kbps 37,004 kbps 00:18:54.883 33,587 kbps 00:15:44.693 32,952 kbps 00:15:44.693 156,872 bytes 422,172 bytes 00:18:54.925 4 0:22:28.388 0:07:00.545 29,334 kbps 47,682 kbps 00:27:30.231 38,843 kbps 00:25:39.162 34,737 kbps 00:25:38.912 152,935 bytes 624,995 bytes 00:27:30.315 5 0:29:28.933 0:06:27.637 30,166 kbps 36,439 kbps 00:30:50.431 33,026 kbps 00:34:24.645 32,391 kbps 00:34:22.268 157,271 bytes 396,522 bytes 00:30:50.640 6 0:35:56.571 0:07:52.805 30,292 kbps 38,355 kbps 00:42:52.486 35,655 kbps 00:42:51.485 33,487 kbps 00:42:51.485 157,926 bytes 479,900 bytes 00:40:42.231 7 0:43:49.376 0:07:36.789 30,358 kbps 39,036 kbps 00:46:58.482 32,797 kbps 00:47:11.912 32,490 kbps 00:48:19.354 158,272 bytes 676,452 bytes 00:46:58.524 8 0:51:26.166 0:08:54.408 30,503 kbps 37,811 kbps 00:52:38.113 33,426 kbps 00:58:40.767 32,757 kbps 00:58:37.931 159,029 bytes 539,954 bytes 00:52:38.154 9 1:00:20.575 0:08:01.230 30,299 kbps 42,081 kbps 01:05:12.408 35,423 kbps 01:05:12.241 33,165 kbps 01:05:12.241 157,963 bytes 636,342 bytes 01:05:13.284 10 1:08:21.806 0:05:39.964 30,188 kbps 40,834 kbps 01:12:30.095 35,139 kbps 01:11:19.984 34,075 kbps 01:11:18.732 157,388 bytes 495,962 bytes 01:12:30.137 11 1:14:01.770 0:06:33.810 30,253 kbps 38,705 kbps 01:16:32.129 33,608 kbps 01:20:24.152 32,719 kbps 01:20:24.152 157,725 bytes 512,938 bytes 01:16:32.170 12 1:20:35.580 0:07:34.328 17,366 kbps 42,406 kbps 01:21:03.733 35,693 kbps 01:21:00.856 34,043 kbps 01:20:55.767 90,545 bytes 663,919 bytes 01:23:01.434 STREAM DIAGNOSTICS: File PID Type Codec Language Seconds Bitrate Bytes Packets ---- --- ---- ----- -------- -------------- -------------- ------------- ----- 00004.M2TS 4113 (0x1011) 0x1B AVC 1000.000 28,978 19,161,368,201 104,211,710 00004.M2TS 4352 (0x1100) 0x80 LPCM eng (English) 1000.000 2,311 1,527,788,100 8,464,200 00004.M2TS 4353 (0x1101) 0x86 DTS-HD MA eng (English) 1000.000 3,441 2,275,063,288 12,878,129 00004.M2TS 4354 (0x1102) 0x80 LPCM eng (English) 1000.000 2,310 1,527,232,160 8,461,120 00004.M2TS 4355 (0x1103) 0x80 LPCM eng (English) 1000.000 2,311 1,527,798,208 8,464,256 00004.M2TS 4356 (0x1104) 0x80 LPCM eng (English) 1000.000 2,311 1,527,798,208 8,464,256 00004.M2TS 4608 (0x1200) 0x90 PGS eng (English) 1000.000 40 26,238,832 151,220 First scan the folder with eac3to. D:\\>eac3to \"Sample Disc\" 1) 00004.mpls, 00010.m2ts+00004.m2ts+00000.m2ts, 1:10:00 - Chapters, 12 chapters - h264/AVC, 1080p24 /1.001 (16:9) That output means the main playlist 00004.mpls is made up of three m2ts files: 00010 + 00004 + 00000, totaling a duration of 1:10:00. 00004.m2ts in a Kino Lorber disc is almost always the main movie. Since we see a different file: 00010.m2ts before it, it's a good indicator that it's the intro. To confirm whether it's the intro, we can look up the info of 00010.m2ts using eac3to: D:\\>eac3to \"Sample Disc\\BDMV\\STREAM\\00010.m2ts\" M2TS, 1 video track, 0:00:11, 24p /1.001 1: h264/AVC, 1080p24 /1.001 (16:9) That output confirms that the duration of 00010.m2ts is 0:00:11, or 11 seconds. Another interesting confirmation from that output is that 00010.m2ts has only an h264 video stream. There is no other stream, like audio or subtitle. Of course, you can also just play 00010.m2ts in a media player, or take its mediainfo, to check if it is 11 seconds long. This is not widely known, but mediainfo can also show you the different m2ts files that a blu-ray playlist is made up of. Command: mediainfo ~/bdfolder/BDMV/PLAYLIST/00004.mpls > output.txt The full path of the mpls file must be used to get the proper output. Going to the PLAYLIST folder and using just the filename, like mediainfo 00004.mpls , produces an incomplete output. Mediainfo of a Kino Lorber disc's main playlist: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 General Complete name : /home/bdfolder/BDMV/PLAYLIST/00004.mpls Format : Blu-ray Playlist File size : 534 Bytes Duration : 1 h 10 min Overall bit rate mode : Variable Overall bit rate : 1 b/s Video #1 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 3 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 3 frames Format settings, GOP : M=3, N=12 Codec ID : 27 Duration : 11 s 11 ms Bit rate mode : Variable Bit rate : 492 kb/s Maximum bit rate : 32.3 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Standard : NTSC Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Bits/(Pixel*Frame) : 0.010 Stream size : 662 KiB Color range : Limited Color primaries : BT.709 Transfer characteristics : BT.709 Matrix coefficients : BT.709 format_identifier : HDMV Source : 00010.m2ts Video #2 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 4 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 4 frames Codec ID : 27 Duration : 1 h 10 min Bit rate mode : Variable Maximum bit rate : 38.0 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive format_identifier : HDMV Source : 00004.m2ts Video #3 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 4 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 4 frames Codec ID : 27 Duration : 1 s 1 ms Bit rate mode : Variable Maximum bit rate : 35.0 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Standard : NTSC Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Color range : Limited Color primaries : BT.709 Transfer characteristics : BT.709 Matrix coefficients : BT.709 format_identifier : HDMV Source : 00000.m2ts Audio #1 ID : 4352 (0x1100) Menu ID : 1 (0x1) Format : DTS XLL Format/Info : Digital Theater Systems Commercial name : DTS-HD Master Audio Muxing mode : Stream extension Codec ID : 134 Duration : 1 h 10 min Bit rate mode : Variable Channel(s) : 2 channels Channel layout : L R Sampling rate : 48.0 kHz Frame rate : 93.750 FPS (512 SPF) Bit depth : 16 bits Compression mode : Lossless Language : English Source : 00004.m2ts Audio #2 ID : 4353 (0x1101) Menu ID : 1 (0x1) Format : AC-3 Format/Info : Audio Coding 3 Commercial name : Dolby Digital Codec ID : 129 Duration : 1 h 10 min Bit rate mode : Constant Bit rate : 192 kb/s Channel(s) : 2 channels Channel layout : L R Sampling rate : 48.0 kHz Frame rate : 31.250 FPS (1536 SPF) Compression mode : Lossy Stream size : 125 MiB Language : English Service kind : Complete Main bsid : 8 Dialog Normalization : -31 Dialog Normalization : -31 dB compr : -0.28 compr : -0.28 dB dsurmod : 0 acmod : 2 lfeon : 0 dialnorm_Average : -31 dialnorm_Average : -31 dB dialnorm_Minimum : -31 dialnorm_Minimum : -31 dB dialnorm_Maximum : -31 dialnorm_Maximum : -31 dB dialnorm_Count : 673 format_identifier : AC-3 Source : 00004.m2ts Text ID : 4608 (0x1200) Menu ID : 1 (0x1) Format : PGS Codec ID : 144 Duration : 1 h 10 min Language : English Source : 00004.m2ts Menu 00:00:00.000 : Chapter 1 The above output shows that the playlist 00004.mpls consists of 00010.m2ts of 11s11ms length + 00004.m2ts of 1h10m length + 00000.m2ts of 1s1ms length. Sidenote: Taking advanced mediainfo using mediainfo -f ~/bdfolder/BDMV/PLAYLIST/00004.mpls > output.txt will show you this pertinent line under the info of 00010.m2ts : Frame count : 264 Which reiterates the statement from earlier in this section \u2014 that the intro is 264 frames long. How to demux properly: # There are two methods to get a properly playable file from such discs. The easier option is to demux 00004.m2ts instead of the playlist. This method removes the intro completely. If you go this route, only the chapters will need to be manually adjusted. The other option is to demux the playlist as usual. This will keep the intro intact, so you need to apply a delay of 11011ms to the audio and subtitles. Demuxing the m2ts method: # Video & Audio: Use your preferred demuxing tool to demux 00004.m2ts directly. If you use eac3to, the command will be eac3to \"Sample Disc\\BDMV\\STREAM\\00004.m2ts\" -demux . You can also drag and drop 00004.m2ts in MKVToolnix GUI. Chapters: The above commands will give you everything except the chapters. You need to get the chapters from the playlist. Extracting chapters: In eac3to, do either eac3to \"Sample Disc\" 1) 1:chapters.txt or eac3to \"Sample Disc\\BDMV\\PLAYLIST\\00004.mpls\" 1:chapters.txt . Or in MKVToolnix GUI, switch to the Chapter editor tab, and drag and drop the file 00004.mpls from the folder BDMV\\PLAYLIST . Adjusting chapters: The same Chapter editor in MKVToolnix GUI can be used to adjust the timings of the chapters. Open the chapter file in there, right click on Edition entry and click on Additional modifications . Check the first field called Shift start and end timestamps and enter the value -00:00:11.011 in the box. Visual Animated Guide for adjusting the chapters: Click here Demuxing the playlist method: # Demux the usual way with eac3to \"Sample Disc\" 1) -demux . Then apply a delay to the audio(s) and subtitle(s). eac3to can be used for this. Audio: eac3to input.dtsma output.dtsma +11011ms Subtitles: eac3to input.sup output.sup +11011ms . Chapters do not need any adjustment if you demuxed the playlist. Alternatively, you can instead set a delay of 11011ms in MKVToolnix when muxing the file. Of course don't apply the delay in both eac3to and MKVToolnix at the same time. Regardless of which method you used, always play the final file in a media player and check if everything is in sync. For encoders: # If you downloaded a remux that is already out of sync by 11 seconds, and want to encode it, you can just trim the first 264 frames of the video in your script. If you go this route, you should not need to do any modification to the audio and subtitles. AviSynth: Trim(264, 0) VapourSynth: core.std.Trim(src, first=264) OR src = src[264:] Remember that frames in AviSynth and VapourSynth start from 0 and not 1. To verify if you cut the intro properly, enable showing the frame info of your trimmed video using MyLWLInfo() / LWLInfo() / awf.FrameInfo() . If the first frame is an I-frame , the cutting was done correctly. Graphic to summarize the problem: #","title":"Kino Lorber BDs"},{"location":"demuxing/kino-lorber/#how-to-demux-kino-lorber-blu-ray-discs-properly","text":"","title":" How to demux Kino Lorber Blu-ray Discs properly"},{"location":"demuxing/kino-lorber/#introduction-to-the-problem","text":"Most Kino Lorber blu-ray discs need a special technique to demux the streams properly. Many distributors insert a few seconds long intro before the movie starts. This intro contains their logo and company name. However, Kino Lorber does it in a unique way unlike any other distributor, where their intro is silent and there is no audio track . Due to this, when you demux these discs, the audio of the main movie gets shifted earlier to the start of the intro. The same thing happens to the subtitles. The result is that you end up with a file which is now out of sync with both the audio and the subtitles.","title":"Introduction to the problem:"},{"location":"demuxing/kino-lorber/#how-to-identify-if-the-disc-needs-special-demuxing","text":"Not every Kino Lorber disc is authored in this way. Some do not have the intro. For instance, their \"Kino Classics\" line of releases are generally not authored in this way (or perhaps never). You need the special demux technique only if the disc has this 11 second intro before the movie. The length of the intro is always 264 frames, which at 23.976 FPS (or 24000/1001 FPS) is 11011ms. Use BDInfo , eac3to or mediainfo to see the contents of the main playlist on the disc. BDInfo Program BDInfo Scan Output eac3to mediainfo Load the folder in the BDInfo application. If there is an 11 second file above the main movie m2ts, that is the intro. Same thing can be done with the FULL (unabridged) BDInfo text output. This output is produced by both the regular BDInfo program and the CLI versions. The full output contains the list of the files that the playlist is made up of. Again, look for an 11 second long file above the main movie. Look for the highlighted line in the below output: DISC INFO: Disc Title: Sample Disc Disc Label: Sample Disc Disc Size: 20,000,000,000 bytes Protection: AACS BDInfo: 0.7.5.5 PLAYLIST REPORT: Name: 00004.MPLS Length: 1:10:00.000 (h:m:s.ms) Size: 20,000,000,000 bytes Total Bitrate: 25.00 Mbps VIDEO: Codec Bitrate Description ----- ------- ----------- MPEG-4 AVC Video 20000 kbps 1080p / 23.976 fps / 16:9 / High Profile 4.1 AUDIO: Codec Language Bitrate Description ----- -------- ------- ----------- DTS-HD Master Audio English 1800 kbps 2.0 / 48 kHz / 1800 kbps / 16-bit (DTS Core: 2.0 / 48 kHz / 1509 kbps / 16-bit) Dolby Digital Audio English 192 kbps 2.0 / 48 kHz / 192 kbps / DN -31dB SUBTITLES: Codec Language Bitrate Description ----- -------- ------- ----------- Presentation Graphics English 25.000 kbps FILES: Name Time In Length Size Total Bitrate ---- ------- ------ ---- ------------- 00010.M2TS 0:00:00.000 0:00:11.010 712,704 518 00004.M2TS 0:00:11.010 1:10:00.000 20,000,000,000 20,000 00000.M2TS 1:10:00.000 0:00:01.000 18,432 147 CHAPTERS: Number Time In Length Avg Video Rate Max 1-Sec Rate Max 1-Sec Time Max 5-Sec Rate Max 5-Sec Time Max 10Sec Rate Max 10Sec Time Avg Frame Size Max Frame Size Max Frame Time ------ ------- ------ -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- -------------- 1 0:00:00.000 0:07:39.709 29,137 kbps 60,233 kbps 00:00:10.343 34,685 kbps 00:00:10.093 33,485 kbps 00:03:51.231 151,895 bytes 613,283 bytes 00:06:25.051 2 0:07:39.709 0:06:54.789 30,063 kbps 41,644 kbps 00:14:02.925 34,095 kbps 00:11:06.916 33,755 kbps 00:11:06.916 156,737 bytes 675,345 bytes 00:14:02.967 3 0:14:34.498 0:07:53.890 30,089 kbps 37,004 kbps 00:18:54.883 33,587 kbps 00:15:44.693 32,952 kbps 00:15:44.693 156,872 bytes 422,172 bytes 00:18:54.925 4 0:22:28.388 0:07:00.545 29,334 kbps 47,682 kbps 00:27:30.231 38,843 kbps 00:25:39.162 34,737 kbps 00:25:38.912 152,935 bytes 624,995 bytes 00:27:30.315 5 0:29:28.933 0:06:27.637 30,166 kbps 36,439 kbps 00:30:50.431 33,026 kbps 00:34:24.645 32,391 kbps 00:34:22.268 157,271 bytes 396,522 bytes 00:30:50.640 6 0:35:56.571 0:07:52.805 30,292 kbps 38,355 kbps 00:42:52.486 35,655 kbps 00:42:51.485 33,487 kbps 00:42:51.485 157,926 bytes 479,900 bytes 00:40:42.231 7 0:43:49.376 0:07:36.789 30,358 kbps 39,036 kbps 00:46:58.482 32,797 kbps 00:47:11.912 32,490 kbps 00:48:19.354 158,272 bytes 676,452 bytes 00:46:58.524 8 0:51:26.166 0:08:54.408 30,503 kbps 37,811 kbps 00:52:38.113 33,426 kbps 00:58:40.767 32,757 kbps 00:58:37.931 159,029 bytes 539,954 bytes 00:52:38.154 9 1:00:20.575 0:08:01.230 30,299 kbps 42,081 kbps 01:05:12.408 35,423 kbps 01:05:12.241 33,165 kbps 01:05:12.241 157,963 bytes 636,342 bytes 01:05:13.284 10 1:08:21.806 0:05:39.964 30,188 kbps 40,834 kbps 01:12:30.095 35,139 kbps 01:11:19.984 34,075 kbps 01:11:18.732 157,388 bytes 495,962 bytes 01:12:30.137 11 1:14:01.770 0:06:33.810 30,253 kbps 38,705 kbps 01:16:32.129 33,608 kbps 01:20:24.152 32,719 kbps 01:20:24.152 157,725 bytes 512,938 bytes 01:16:32.170 12 1:20:35.580 0:07:34.328 17,366 kbps 42,406 kbps 01:21:03.733 35,693 kbps 01:21:00.856 34,043 kbps 01:20:55.767 90,545 bytes 663,919 bytes 01:23:01.434 STREAM DIAGNOSTICS: File PID Type Codec Language Seconds Bitrate Bytes Packets ---- --- ---- ----- -------- -------------- -------------- ------------- ----- 00004.M2TS 4113 (0x1011) 0x1B AVC 1000.000 28,978 19,161,368,201 104,211,710 00004.M2TS 4352 (0x1100) 0x80 LPCM eng (English) 1000.000 2,311 1,527,788,100 8,464,200 00004.M2TS 4353 (0x1101) 0x86 DTS-HD MA eng (English) 1000.000 3,441 2,275,063,288 12,878,129 00004.M2TS 4354 (0x1102) 0x80 LPCM eng (English) 1000.000 2,310 1,527,232,160 8,461,120 00004.M2TS 4355 (0x1103) 0x80 LPCM eng (English) 1000.000 2,311 1,527,798,208 8,464,256 00004.M2TS 4356 (0x1104) 0x80 LPCM eng (English) 1000.000 2,311 1,527,798,208 8,464,256 00004.M2TS 4608 (0x1200) 0x90 PGS eng (English) 1000.000 40 26,238,832 151,220 First scan the folder with eac3to. D:\\>eac3to \"Sample Disc\" 1) 00004.mpls, 00010.m2ts+00004.m2ts+00000.m2ts, 1:10:00 - Chapters, 12 chapters - h264/AVC, 1080p24 /1.001 (16:9) That output means the main playlist 00004.mpls is made up of three m2ts files: 00010 + 00004 + 00000, totaling a duration of 1:10:00. 00004.m2ts in a Kino Lorber disc is almost always the main movie. Since we see a different file: 00010.m2ts before it, it's a good indicator that it's the intro. To confirm whether it's the intro, we can look up the info of 00010.m2ts using eac3to: D:\\>eac3to \"Sample Disc\\BDMV\\STREAM\\00010.m2ts\" M2TS, 1 video track, 0:00:11, 24p /1.001 1: h264/AVC, 1080p24 /1.001 (16:9) That output confirms that the duration of 00010.m2ts is 0:00:11, or 11 seconds. Another interesting confirmation from that output is that 00010.m2ts has only an h264 video stream. There is no other stream, like audio or subtitle. Of course, you can also just play 00010.m2ts in a media player, or take its mediainfo, to check if it is 11 seconds long. This is not widely known, but mediainfo can also show you the different m2ts files that a blu-ray playlist is made up of. Command: mediainfo ~/bdfolder/BDMV/PLAYLIST/00004.mpls > output.txt The full path of the mpls file must be used to get the proper output. Going to the PLAYLIST folder and using just the filename, like mediainfo 00004.mpls , produces an incomplete output. Mediainfo of a Kino Lorber disc's main playlist: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 General Complete name : /home/bdfolder/BDMV/PLAYLIST/00004.mpls Format : Blu-ray Playlist File size : 534 Bytes Duration : 1 h 10 min Overall bit rate mode : Variable Overall bit rate : 1 b/s Video #1 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 3 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 3 frames Format settings, GOP : M=3, N=12 Codec ID : 27 Duration : 11 s 11 ms Bit rate mode : Variable Bit rate : 492 kb/s Maximum bit rate : 32.3 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Standard : NTSC Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Bits/(Pixel*Frame) : 0.010 Stream size : 662 KiB Color range : Limited Color primaries : BT.709 Transfer characteristics : BT.709 Matrix coefficients : BT.709 format_identifier : HDMV Source : 00010.m2ts Video #2 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 4 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 4 frames Codec ID : 27 Duration : 1 h 10 min Bit rate mode : Variable Maximum bit rate : 38.0 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive format_identifier : HDMV Source : 00004.m2ts Video #3 ID : 4113 (0x1011) Menu ID : 1 (0x1) Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings : CABAC / 4 Ref Frames Format settings, CABAC : Yes Format settings, Reference frames : 4 frames Codec ID : 27 Duration : 1 s 1 ms Bit rate mode : Variable Maximum bit rate : 35.0 Mb/s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 23.976 (24000/1001) FPS Standard : NTSC Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Color range : Limited Color primaries : BT.709 Transfer characteristics : BT.709 Matrix coefficients : BT.709 format_identifier : HDMV Source : 00000.m2ts Audio #1 ID : 4352 (0x1100) Menu ID : 1 (0x1) Format : DTS XLL Format/Info : Digital Theater Systems Commercial name : DTS-HD Master Audio Muxing mode : Stream extension Codec ID : 134 Duration : 1 h 10 min Bit rate mode : Variable Channel(s) : 2 channels Channel layout : L R Sampling rate : 48.0 kHz Frame rate : 93.750 FPS (512 SPF) Bit depth : 16 bits Compression mode : Lossless Language : English Source : 00004.m2ts Audio #2 ID : 4353 (0x1101) Menu ID : 1 (0x1) Format : AC-3 Format/Info : Audio Coding 3 Commercial name : Dolby Digital Codec ID : 129 Duration : 1 h 10 min Bit rate mode : Constant Bit rate : 192 kb/s Channel(s) : 2 channels Channel layout : L R Sampling rate : 48.0 kHz Frame rate : 31.250 FPS (1536 SPF) Compression mode : Lossy Stream size : 125 MiB Language : English Service kind : Complete Main bsid : 8 Dialog Normalization : -31 Dialog Normalization : -31 dB compr : -0.28 compr : -0.28 dB dsurmod : 0 acmod : 2 lfeon : 0 dialnorm_Average : -31 dialnorm_Average : -31 dB dialnorm_Minimum : -31 dialnorm_Minimum : -31 dB dialnorm_Maximum : -31 dialnorm_Maximum : -31 dB dialnorm_Count : 673 format_identifier : AC-3 Source : 00004.m2ts Text ID : 4608 (0x1200) Menu ID : 1 (0x1) Format : PGS Codec ID : 144 Duration : 1 h 10 min Language : English Source : 00004.m2ts Menu 00:00:00.000 : Chapter 1 The above output shows that the playlist 00004.mpls consists of 00010.m2ts of 11s11ms length + 00004.m2ts of 1h10m length + 00000.m2ts of 1s1ms length. Sidenote: Taking advanced mediainfo using mediainfo -f ~/bdfolder/BDMV/PLAYLIST/00004.mpls > output.txt will show you this pertinent line under the info of 00010.m2ts : Frame count : 264 Which reiterates the statement from earlier in this section \u2014 that the intro is 264 frames long.","title":"How to identify if the disc needs special demuxing:"},{"location":"demuxing/kino-lorber/#how-to-demux-properly","text":"There are two methods to get a properly playable file from such discs. The easier option is to demux 00004.m2ts instead of the playlist. This method removes the intro completely. If you go this route, only the chapters will need to be manually adjusted. The other option is to demux the playlist as usual. This will keep the intro intact, so you need to apply a delay of 11011ms to the audio and subtitles.","title":"How to demux properly:"},{"location":"demuxing/kino-lorber/#demuxing-the-m2ts-method","text":"Video & Audio: Use your preferred demuxing tool to demux 00004.m2ts directly. If you use eac3to, the command will be eac3to \"Sample Disc\\BDMV\\STREAM\\00004.m2ts\" -demux . You can also drag and drop 00004.m2ts in MKVToolnix GUI. Chapters: The above commands will give you everything except the chapters. You need to get the chapters from the playlist. Extracting chapters: In eac3to, do either eac3to \"Sample Disc\" 1) 1:chapters.txt or eac3to \"Sample Disc\\BDMV\\PLAYLIST\\00004.mpls\" 1:chapters.txt . Or in MKVToolnix GUI, switch to the Chapter editor tab, and drag and drop the file 00004.mpls from the folder BDMV\\PLAYLIST . Adjusting chapters: The same Chapter editor in MKVToolnix GUI can be used to adjust the timings of the chapters. Open the chapter file in there, right click on Edition entry and click on Additional modifications . Check the first field called Shift start and end timestamps and enter the value -00:00:11.011 in the box. Visual Animated Guide for adjusting the chapters: Click here","title":"Demuxing the m2ts method:"},{"location":"demuxing/kino-lorber/#demuxing-the-playlist-method","text":"Demux the usual way with eac3to \"Sample Disc\" 1) -demux . Then apply a delay to the audio(s) and subtitle(s). eac3to can be used for this. Audio: eac3to input.dtsma output.dtsma +11011ms Subtitles: eac3to input.sup output.sup +11011ms . Chapters do not need any adjustment if you demuxed the playlist. Alternatively, you can instead set a delay of 11011ms in MKVToolnix when muxing the file. Of course don't apply the delay in both eac3to and MKVToolnix at the same time. Regardless of which method you used, always play the final file in a media player and check if everything is in sync.","title":"Demuxing the playlist method:"},{"location":"demuxing/kino-lorber/#for-encoders","text":"If you downloaded a remux that is already out of sync by 11 seconds, and want to encode it, you can just trim the first 264 frames of the video in your script. If you go this route, you should not need to do any modification to the audio and subtitles. AviSynth: Trim(264, 0) VapourSynth: core.std.Trim(src, first=264) OR src = src[264:] Remember that frames in AviSynth and VapourSynth start from 0 and not 1. To verify if you cut the intro properly, enable showing the frame info of your trimmed video using MyLWLInfo() / LWLInfo() / awf.FrameInfo() . If the first frame is an I-frame , the cutting was done correctly.","title":"For encoders:"},{"location":"demuxing/kino-lorber/#graphic-to-summarize-the-problem","text":"","title":"Graphic to summarize the problem:"},{"location":"video/screenshots/anamorphic/","text":"Anamorphic Files: Storage Resolution vs Display Resolution # Info This section is only relevant for files with anamorphic resolution. It is primarily found in rips from DVD, VHS and TV. Some lower quality Blu-ray content, especially Extras, are also anamorphically encoded. What are anamorphic files? # Anamorphic files are encoded (or stored) at a different resolution than what they are displayed at. The resolution at which such a file is stored is called the Storage Resolution , and the resolution at which it is actually displayed for the end user is called the Display Resolution . For example, a file may be encoded at 720x480 resolution, but at the time of playback, it's scaled to 853x480 by your media player or device. For our purposes, the screenshots need to be taken at the Display Resolution. Screenshots taken at Storage Resolution will appear to be bad aspect ratio. They will look shrunk or stretched, and will not represent what the video actually looks like to someone watching the film. Example of screenshot taken at storage vs display resolution: (After clicking once on either tab, you can also press the Left or Right arrow keys to navigate.) Storage Resolution Display Resolution How to tell if a file is anamorphic? # MediaInfo summary on site: # The easiest way is to look at the mediainfo summary on site. Whenever the Resolution field shows two values, one after the other, the file is anamorphic. The resolutions are displayed in the form Storage RES ~> Display RES . The screenshots must be taken in the second resolution, i.e. Display Resolution. However, for many files, the screenshots will not match the Display Resolution exactly. There can be a discrepancy of 10 or 20 pixels between the screenshots and the Display Resolution shown in the summary. This is normal, and it happens because the Display aspect ratio in mediainfo is an approximation instead of being an exact value. For example, mediainfo may round an AR of 1.834:1 to 1.85:1. Advanced MediaInfo: # The second way is through the Advanced mode in mediainfo. There are two ways to take Advanced mediainfo of a file. CLI : mediainfo -f file.mkv > output.txt GUI : Load the file in the mediainfo application. First, go to View in menu bar and ensure that the Text view is selected. Then click on Debug and then Advanced mode . See this screenshot if you need help finding it. For illustration purposes, a sample file of resolution 718x436 was chosen. The relevant part we want from the Advanced mediainfo, under Video section, is: Pixel aspect ratio : 1.422 Display aspect ratio : 2.342 Display aspect ratio : 2.35:1 If the Pixel aspect ratio is NOT exactly 1.000, the file is anamorphic. How to find out the precise Display Resolution? # 1.1 Using PAR : # The PAR can be used to find out what the Display Resolution should be. Just multiply the width of the file with the PAR value. So since the file's storage resolution is 718x436, the display width will be \\(718 \\times 1.422\\) which equals \\(1021\\) . Therefore, your screenshots will come out to approximately 1021x436. 1.2 Using PAR (alternate method): # Some media players might display this file at an alternate display resolution, where instead of the width being multiplied, the height gets divided by the PAR . In the above example, the calculation becomes \\(436 \\div 1.422 = {\\sim}307\\) . Therefore, the alternate display resolution of this file will be 718x307. Once again, this gives a similar Display aspect ratio: \\(718 \\div 307 = 2.339\\) . You can think of this alternate resolution as the video being downscaled instead of upscaled when rescaling the video from the storage resolution to the display resolution. Another way of visualizing this is : To rescale such a file, you can either stretch it horizontally or shrink it vertically. Stretching it horizontally is the usual way, while shrinking it vertically is the alternate way. Although this alternate method gives a technically valid resolution, but screenshots must be avoided in it. If you are ending up with such screenshots, try updating your software or using a different program from the choices listed in this page . 1.3 Using DAR : # Instead of using PAR , take the precise Display aspect ratio from the Advanced mediainfo and multiply the height with it. This is in contrast to using the PAR , where we multiplied the width instead of the height. So, for the above example of a 718x436 file, the resulting width becomes \\(436 \\times 2.342 = 1021\\) , which is the same width we got using the PAR method. However, I do not prefer this method, simply because it is easier to spot an anamorphic file using the Pixel aspect ratio \u2014 if PAR is NOT 1.000, it is anamorphic. graph TD; id1{{\"<b>HOW TO CALCULATE THE DISPLAY RESOLUTION:</b>\"}} --> A; A[\"<b>Encode at storage resolution</b> <br /> <i>Dimensions:</i> 718x436 <br /> <i>PAR:</i> 1.422 <br /> <i>DAR:</i> 2.342 <br /> <i>SAR:</i> 1.647\"]; A --> |\"Method 1.1 (Using PAR)\"| B[\"<b>Multiply the width with the PAR.</b> <br /> <u>Calculation:</u> 718 \u00d7 1.422 = 1021 <br /> <u>Result:</u> 1021x436 <br /> <u>AR:</u> 2.3417\"]; A -->|\"Method 1.2 (Using PAR - Alt.)\"| C[\"<b>Divide the height with the PAR.</b> <br /> <u>Calculation:</u> 436 \u00f7 1.422 = 307 <br /> <u>Result:</u> 718x307 <br /> <u>AR:</u> 2.3387\"]; A -->|\"Method 1.3 (Using DAR)\"| D[\"<b>Multiply the height with the DAR.</b> <br /> <u>Calculation:</u> 436 \u00d7 2.342 = 1021 <br /> <u>Result:</u> 1021x436 <br /> <u>AR:</u> 2.342\"]; style id1 fill:#F9F6D6 1.4 Using mkvinfo, or the \"Info Tool\" in MKVToolnix GUI : # MKVToolnix comes with both a CLI and a GUI tool to display information of an MKV file. The CLI tool is mkvinfo \u2014 it comes pre-installed on my seedboxes. Command: mkvinfo file.mkv > output.txt The GUI version is available when you open MKVToolnix GUI \u2014 on the left sidebar, there is Info tool . As the name of the program suggestions, this method is only for MKV files. It cannot be used for AVI files, DVDs, etc. Illustration of both ways \u2014 mkvinfo & MKVToolnix GUI : mkvinfo MKVToolnix GUI 's Info tool C:\\Users\\username> mkvinfo sample.mkv + EBML head |+ EBML version: 1 |+ EBML read version: 1 |+ Maximum EBML ID length: 4 |+ Maximum EBML size length: 8 |+ Document type: matroska |+ Document type version: 4 |+ Document type read version: 2 + Segment: size 79072273 |+ Seek head (subentries will be skipped) |+ EBML void: size 4012 |+ Segment information | + Timestamp scale: 1000000 | + Multiplexing application: libebml v1.4.2 + libmatroska v1.6.4 | + Writing application: mkvmerge v67.0.0 ('Under Stars') 64-bit | + Duration: 00:05:06.564000000 | + Date: 2022-05-08 16:41:33 UTC | + Segment UID: 0x17 0xae 0xf3 0x41 0x72 0xef 0x3e 0x02 0xa4 0xc9 0xd6 0xd2 0xef 0x44 0xf9 0xce |+ Tracks | + Track | + Track number: 1 (track ID for mkvmerge & mkvextract: 0) | + Track UID: 214864758 | + Track type: video | + \"Lacing\" flag: 0 | + Codec ID: V_MPEG4/ISO/AVC | + Codec's private data: size 53 (H.264 profile: High @L4.0) | + Default duration: 00:00:00.040000000 (25.000 frames/fields per second for a video track) | + Language (IETF BCP 47): en | + Video track | + Pixel width: 716 | + Pixel height: 548 | + Display width: 1018 | + Display height: 548 Correlation between SAR , DAR and PAR : This part is not directly relevant to taking screenshots, but it is being mentioned for the curious. In the example in points 1.1 to 1.3, pay attention to the correlation between the display resolution of 1021x436 we got and the first Display aspect ratio in the Advanced MI : \\(1021 \\div 436 = {\\sim}2.342\\) , which matches the first Display aspect ratio in the Advanced mediainfo. That first value is more precise, while the second one is a rounded value. The precise value is shown only in the Advanced mediainfo. A commonly known equation is \\(DAR = SAR \\times PAR\\) . The acronyms DAR and PAR have already been referenced above. SAR refers to the Storage aspect ratio . Simply put, it is the ratio of the (storage) width to the (storage) height. For the sample file we chose above, its SAR is \\(718 \\div 436 = {\\sim}1.647\\) . Its PAR is already known to be 1.422. Therefore, its DAR = \\(1.647 \\times 1.422\\) which equals \\(2.342\\) , which in turn, matches the value in the Advanced mediainfo. Important: The SAR above is not to be confused with the other acronym of the same name that stands for Sample Aspect Ratio . Sample Aspect Ratio is basically the same thing as PAR . It is used in encoding workflows, for example the --sar parameter in x264. See link number 6 in the section at the end for example. List of common PAR values: # These are the most common PAR values you will encounter. Look for the values in the PAR (Decimal) field in the Advanced MI . Video System DAR PAR (Ratio) \ud83d\udca1 PAR (Decimal) Type Resolution in MI summary (for DVDs) NTSC 4:3 8:9 0.888889 Generic 720x480 ~> 720x540 (Alt: 640x480) NTSC 16:9 32:27 1.185185 Generic 720x480 ~> 853x480 (Alt: 720x405) NTSC 4:3 10:11 0.909091 ITU (MPEG-4) 720x480 ~> 720x528 (Alt: 654x480) NTSC 16:9 40:33 1.212121 ITU (MPEG-4) 720x480 ~> 872x480 (Alt: 720x396) PAL 4:3 16:15 1.066667 Generic 720x576 ~> 768x576 (Alt: 720x540) PAL 16:9 64:45 1.422222 Generic 720x576 ~> 1024x576 (Alt: 720x405) PAL 4:3 12:11 1.090909 ITU (MPEG-4) 720x576 ~> 785x576 (Alt: 720x528) PAL 16:9 16:11 1.454545 ITU (MPEG-4) 720x576 ~> 1047x576 (Alt: 720x396) (Sourced primarily from links 4 & 7 in the Further reading material section at the bottom of the page.) In addition, many WEB-DLs, especially from AMZN have a PAR of 1.002. On such a 1920x1080 WEB-DL for example, the screenshots will come out as 1924x1080. Further reading material: # https://en.wikipedia.org/wiki/Pixel_aspect_ratio http://www.doom9.org/index.html?/aspectratios.htm http://www.doom9.org/index.html?/capture/par.html https://forum.doom9.org/showthread.php?t=176152 https://forum.doom9.org/showthread.php?t=111102 https://forum.doom9.org/showthread.php?p=1058927#post1058927 (Particularly the last part of the post) https://github.com/MediaArea/MediaInfo/issues/171 https://www.animemusicvideos.org/guides/avtech3/theory-videoaspectratios.html","title":"Anamorphic Files"},{"location":"video/screenshots/anamorphic/#anamorphic-files-storage-resolution-vs-display-resolution","text":"Info This section is only relevant for files with anamorphic resolution. It is primarily found in rips from DVD, VHS and TV. Some lower quality Blu-ray content, especially Extras, are also anamorphically encoded.","title":" Anamorphic Files: Storage Resolution vs Display Resolution"},{"location":"video/screenshots/anamorphic/#what-are-anamorphic-files","text":"Anamorphic files are encoded (or stored) at a different resolution than what they are displayed at. The resolution at which such a file is stored is called the Storage Resolution , and the resolution at which it is actually displayed for the end user is called the Display Resolution . For example, a file may be encoded at 720x480 resolution, but at the time of playback, it's scaled to 853x480 by your media player or device. For our purposes, the screenshots need to be taken at the Display Resolution. Screenshots taken at Storage Resolution will appear to be bad aspect ratio. They will look shrunk or stretched, and will not represent what the video actually looks like to someone watching the film. Example of screenshot taken at storage vs display resolution: (After clicking once on either tab, you can also press the Left or Right arrow keys to navigate.) Storage Resolution Display Resolution","title":"What are anamorphic files?"},{"location":"video/screenshots/anamorphic/#how-to-tell-if-a-file-is-anamorphic","text":"","title":"How to tell if a file is anamorphic?"},{"location":"video/screenshots/anamorphic/#mediainfo-summary-on-site","text":"The easiest way is to look at the mediainfo summary on site. Whenever the Resolution field shows two values, one after the other, the file is anamorphic. The resolutions are displayed in the form Storage RES ~> Display RES . The screenshots must be taken in the second resolution, i.e. Display Resolution. However, for many files, the screenshots will not match the Display Resolution exactly. There can be a discrepancy of 10 or 20 pixels between the screenshots and the Display Resolution shown in the summary. This is normal, and it happens because the Display aspect ratio in mediainfo is an approximation instead of being an exact value. For example, mediainfo may round an AR of 1.834:1 to 1.85:1.","title":"MediaInfo summary on site:"},{"location":"video/screenshots/anamorphic/#advanced-mediainfo","text":"The second way is through the Advanced mode in mediainfo. There are two ways to take Advanced mediainfo of a file. CLI : mediainfo -f file.mkv > output.txt GUI : Load the file in the mediainfo application. First, go to View in menu bar and ensure that the Text view is selected. Then click on Debug and then Advanced mode . See this screenshot if you need help finding it. For illustration purposes, a sample file of resolution 718x436 was chosen. The relevant part we want from the Advanced mediainfo, under Video section, is: Pixel aspect ratio : 1.422 Display aspect ratio : 2.342 Display aspect ratio : 2.35:1 If the Pixel aspect ratio is NOT exactly 1.000, the file is anamorphic.","title":"Advanced MediaInfo:"},{"location":"video/screenshots/anamorphic/#how-to-find-out-the-precise-display-resolution","text":"","title":"How to find out the precise Display Resolution?"},{"location":"video/screenshots/anamorphic/#11-using-par","text":"The PAR can be used to find out what the Display Resolution should be. Just multiply the width of the file with the PAR value. So since the file's storage resolution is 718x436, the display width will be \\(718 \\times 1.422\\) which equals \\(1021\\) . Therefore, your screenshots will come out to approximately 1021x436.","title":"1.1 Using PAR:"},{"location":"video/screenshots/anamorphic/#12-using-par-alternate-method","text":"Some media players might display this file at an alternate display resolution, where instead of the width being multiplied, the height gets divided by the PAR . In the above example, the calculation becomes \\(436 \\div 1.422 = {\\sim}307\\) . Therefore, the alternate display resolution of this file will be 718x307. Once again, this gives a similar Display aspect ratio: \\(718 \\div 307 = 2.339\\) . You can think of this alternate resolution as the video being downscaled instead of upscaled when rescaling the video from the storage resolution to the display resolution. Another way of visualizing this is : To rescale such a file, you can either stretch it horizontally or shrink it vertically. Stretching it horizontally is the usual way, while shrinking it vertically is the alternate way. Although this alternate method gives a technically valid resolution, but screenshots must be avoided in it. If you are ending up with such screenshots, try updating your software or using a different program from the choices listed in this page .","title":"1.2 Using PAR (alternate method):"},{"location":"video/screenshots/anamorphic/#13-using-dar","text":"Instead of using PAR , take the precise Display aspect ratio from the Advanced mediainfo and multiply the height with it. This is in contrast to using the PAR , where we multiplied the width instead of the height. So, for the above example of a 718x436 file, the resulting width becomes \\(436 \\times 2.342 = 1021\\) , which is the same width we got using the PAR method. However, I do not prefer this method, simply because it is easier to spot an anamorphic file using the Pixel aspect ratio \u2014 if PAR is NOT 1.000, it is anamorphic. graph TD; id1{{\"<b>HOW TO CALCULATE THE DISPLAY RESOLUTION:</b>\"}} --> A; A[\"<b>Encode at storage resolution</b> <br /> <i>Dimensions:</i> 718x436 <br /> <i>PAR:</i> 1.422 <br /> <i>DAR:</i> 2.342 <br /> <i>SAR:</i> 1.647\"]; A --> |\"Method 1.1 (Using PAR)\"| B[\"<b>Multiply the width with the PAR.</b> <br /> <u>Calculation:</u> 718 \u00d7 1.422 = 1021 <br /> <u>Result:</u> 1021x436 <br /> <u>AR:</u> 2.3417\"]; A -->|\"Method 1.2 (Using PAR - Alt.)\"| C[\"<b>Divide the height with the PAR.</b> <br /> <u>Calculation:</u> 436 \u00f7 1.422 = 307 <br /> <u>Result:</u> 718x307 <br /> <u>AR:</u> 2.3387\"]; A -->|\"Method 1.3 (Using DAR)\"| D[\"<b>Multiply the height with the DAR.</b> <br /> <u>Calculation:</u> 436 \u00d7 2.342 = 1021 <br /> <u>Result:</u> 1021x436 <br /> <u>AR:</u> 2.342\"]; style id1 fill:#F9F6D6","title":"1.3 Using DAR:"},{"location":"video/screenshots/anamorphic/#14-using-mkvinfo-or-the-info-tool-in-mkvtoolnix-gui","text":"MKVToolnix comes with both a CLI and a GUI tool to display information of an MKV file. The CLI tool is mkvinfo \u2014 it comes pre-installed on my seedboxes. Command: mkvinfo file.mkv > output.txt The GUI version is available when you open MKVToolnix GUI \u2014 on the left sidebar, there is Info tool . As the name of the program suggestions, this method is only for MKV files. It cannot be used for AVI files, DVDs, etc. Illustration of both ways \u2014 mkvinfo & MKVToolnix GUI : mkvinfo MKVToolnix GUI 's Info tool C:\\Users\\username> mkvinfo sample.mkv + EBML head |+ EBML version: 1 |+ EBML read version: 1 |+ Maximum EBML ID length: 4 |+ Maximum EBML size length: 8 |+ Document type: matroska |+ Document type version: 4 |+ Document type read version: 2 + Segment: size 79072273 |+ Seek head (subentries will be skipped) |+ EBML void: size 4012 |+ Segment information | + Timestamp scale: 1000000 | + Multiplexing application: libebml v1.4.2 + libmatroska v1.6.4 | + Writing application: mkvmerge v67.0.0 ('Under Stars') 64-bit | + Duration: 00:05:06.564000000 | + Date: 2022-05-08 16:41:33 UTC | + Segment UID: 0x17 0xae 0xf3 0x41 0x72 0xef 0x3e 0x02 0xa4 0xc9 0xd6 0xd2 0xef 0x44 0xf9 0xce |+ Tracks | + Track | + Track number: 1 (track ID for mkvmerge & mkvextract: 0) | + Track UID: 214864758 | + Track type: video | + \"Lacing\" flag: 0 | + Codec ID: V_MPEG4/ISO/AVC | + Codec's private data: size 53 (H.264 profile: High @L4.0) | + Default duration: 00:00:00.040000000 (25.000 frames/fields per second for a video track) | + Language (IETF BCP 47): en | + Video track | + Pixel width: 716 | + Pixel height: 548 | + Display width: 1018 | + Display height: 548 Correlation between SAR , DAR and PAR : This part is not directly relevant to taking screenshots, but it is being mentioned for the curious. In the example in points 1.1 to 1.3, pay attention to the correlation between the display resolution of 1021x436 we got and the first Display aspect ratio in the Advanced MI : \\(1021 \\div 436 = {\\sim}2.342\\) , which matches the first Display aspect ratio in the Advanced mediainfo. That first value is more precise, while the second one is a rounded value. The precise value is shown only in the Advanced mediainfo. A commonly known equation is \\(DAR = SAR \\times PAR\\) . The acronyms DAR and PAR have already been referenced above. SAR refers to the Storage aspect ratio . Simply put, it is the ratio of the (storage) width to the (storage) height. For the sample file we chose above, its SAR is \\(718 \\div 436 = {\\sim}1.647\\) . Its PAR is already known to be 1.422. Therefore, its DAR = \\(1.647 \\times 1.422\\) which equals \\(2.342\\) , which in turn, matches the value in the Advanced mediainfo. Important: The SAR above is not to be confused with the other acronym of the same name that stands for Sample Aspect Ratio . Sample Aspect Ratio is basically the same thing as PAR . It is used in encoding workflows, for example the --sar parameter in x264. See link number 6 in the section at the end for example.","title":"1.4 Using mkvinfo, or the \"Info Tool\" in MKVToolnix GUI:"},{"location":"video/screenshots/anamorphic/#list-of-common-par-values","text":"These are the most common PAR values you will encounter. Look for the values in the PAR (Decimal) field in the Advanced MI . Video System DAR PAR (Ratio) \ud83d\udca1 PAR (Decimal) Type Resolution in MI summary (for DVDs) NTSC 4:3 8:9 0.888889 Generic 720x480 ~> 720x540 (Alt: 640x480) NTSC 16:9 32:27 1.185185 Generic 720x480 ~> 853x480 (Alt: 720x405) NTSC 4:3 10:11 0.909091 ITU (MPEG-4) 720x480 ~> 720x528 (Alt: 654x480) NTSC 16:9 40:33 1.212121 ITU (MPEG-4) 720x480 ~> 872x480 (Alt: 720x396) PAL 4:3 16:15 1.066667 Generic 720x576 ~> 768x576 (Alt: 720x540) PAL 16:9 64:45 1.422222 Generic 720x576 ~> 1024x576 (Alt: 720x405) PAL 4:3 12:11 1.090909 ITU (MPEG-4) 720x576 ~> 785x576 (Alt: 720x528) PAL 16:9 16:11 1.454545 ITU (MPEG-4) 720x576 ~> 1047x576 (Alt: 720x396) (Sourced primarily from links 4 & 7 in the Further reading material section at the bottom of the page.) In addition, many WEB-DLs, especially from AMZN have a PAR of 1.002. On such a 1920x1080 WEB-DL for example, the screenshots will come out as 1924x1080.","title":"List of common PAR values:"},{"location":"video/screenshots/anamorphic/#further-reading-material","text":"https://en.wikipedia.org/wiki/Pixel_aspect_ratio http://www.doom9.org/index.html?/aspectratios.htm http://www.doom9.org/index.html?/capture/par.html https://forum.doom9.org/showthread.php?t=176152 https://forum.doom9.org/showthread.php?t=111102 https://forum.doom9.org/showthread.php?p=1058927#post1058927 (Particularly the last part of the post) https://github.com/MediaArea/MediaInfo/issues/171 https://www.animemusicvideos.org/guides/avtech3/theory-videoaspectratios.html","title":" Further reading material:"},{"location":"video/screenshots/guidelines/","text":"General Guidelines for Screenshots # Must be in PNG format. Must be in the Display Resolution (if the file is anamorphic). See the Anamorphic Files section for details. Must NOT have subtitles visible, unless they are hardcoded. For files with hardcoded subtitles, try to include at least one screenshot showing the hardsub. This goes for both cases: whether the file has hardcoded subtitles for the whole movie, or for only the foreign language parts. It is highly recommended to optimize your PNGs to reduce their file size with zero loss in quality. See the Lossless PNG Optimization section for details. (placeholder link) Avoid taking screenshots of timestamps too close to each other. Avoid putting too many screenshots. For example, a 15-minute short film does not need 10 screenshots. Avoid scenes where nothing much is visible in the frame \u2014 for example, an almost black or fully black frame, or an extreme closeup of an object. For multi-file uploads, take at least one screenshot from each file. For full disc uploads, try to include screenshots of the disc menu \u2014 in particular for the Extras or Audio / Subtitle options. See the Disc Menus section for details. (placeholder link) For HDR or 10-bit video, it is advised to keep the bit-depth of the PNGs as 8-bit instead of 16-bit. See the HDR and 10-bit Video section for details. (placeholder link)","title":"General Guidelines"},{"location":"video/screenshots/guidelines/#general-guidelines-for-screenshots","text":"Must be in PNG format. Must be in the Display Resolution (if the file is anamorphic). See the Anamorphic Files section for details. Must NOT have subtitles visible, unless they are hardcoded. For files with hardcoded subtitles, try to include at least one screenshot showing the hardsub. This goes for both cases: whether the file has hardcoded subtitles for the whole movie, or for only the foreign language parts. It is highly recommended to optimize your PNGs to reduce their file size with zero loss in quality. See the Lossless PNG Optimization section for details. (placeholder link) Avoid taking screenshots of timestamps too close to each other. Avoid putting too many screenshots. For example, a 15-minute short film does not need 10 screenshots. Avoid scenes where nothing much is visible in the frame \u2014 for example, an almost black or fully black frame, or an extreme closeup of an object. For multi-file uploads, take at least one screenshot from each file. For full disc uploads, try to include screenshots of the disc menu \u2014 in particular for the Extras or Audio / Subtitle options. See the Disc Menus section for details. (placeholder link) For HDR or 10-bit video, it is advised to keep the bit-depth of the PNGs as 8-bit instead of 16-bit. See the HDR and 10-bit Video section for details. (placeholder link)","title":" General Guidelines for Screenshots"},{"location":"video/screenshots/programs-choices/","text":"Different Programs to Take Screenshots # mpv # Official Webpage mpv.net (Windows GUI) Setting up mpv: # First, we need to create a configuration file for storing mpv's settings. See this page from the mpv docs about configuration files and their location. Windows: the conf file should be at %APPDATA%\\mpv\\mpv.conf Mac and Linux: ~/.config/mpv/mpv.conf Create an empty mpv.conf file if it doesn't exist. Copy paste the following code inside the conf file. Change the screenshot-directory from D:\\ to your desired path. screenshot-format =png screenshot-directory =\"D : \\\" # Save screenshots in the pattern of 'filename-timestamp.png' screenshot-template =\"%F-%p\" # Deactivate debanding --deband =no # Always use 8-bit depth to keep file size reasonable --screenshot-high-bit-depth =no Setting up mpv.net: # If you prefer to use mpv.net , the Windows GUI fork, you can change its settings by pressing c or right clicking inside the window > Settings > Show Config Editor . Type \"screenshot\" in the search box. Set screenshot-directory to your desired folder, screenshot-format to png , screenshot-high-bit-depth to no , and screenshot-template to %F-%p . Visual Guide: Click here Taking the screenshots: # Drag and drop your file inside mpv's window. Find a suitable spot in the video of which you want to take a screenshot. Press Shift + S to take the screenshot. If you press lowercase s, the screenshot will be taken with subtitles enabled. mpv.net does not appear to support Shift + S , so remember to turn off the subtitles before pressing lowercase s. VLC Media Player # Official Webpage Version 2.1.5 Info The latest version of VLC takes screenshots correctly in display resolution for most types of files. But some DVDs authored with improper aspect ratio play properly only in VLC 2.1.5. See the section at the end for more details. Versions 2.2.0 to 2.2.4 take screenshots at storage resolution for all files, so they cannot be used for anamorphic files. However, VLC fails at taking screenshots using the proper color matrix conversions, resulting in screenshots with inaccurate colors. Therefore, it is advised to keep VLC as a backup option. Try one of the other programs on this page first for color-accurate screenshots. Setting up VLC: # Press Ctrl + P or go to the Menu bar, then Tools > Preferences > Video tab. Under the Format dropdown, ensure that png is selected. On the same Video tab, it is also recommended to set Deinterlacing to Off. Make a note of the folder the Directory option is set at, or change it if you wish. This is where VLC will save the screenshots. Taking the screenshots: # Open the video by either pressing Ctrl + O , or by going to the Menu bar > Media > Open File , or by simply dragging and dropping the file inside the player window. VLC also works well for streaming a file from your seedbox/server with http(s). To load a remote file, press Ctrl + N or click on the Menu bar > Media > Open Network Stream . You can also just copy the URL of the file in your browser, then switch to the VLC window, and press Ctrl + V . Ensure that any soft subtitles are turned off by going to the Menu bar > Subtitle > Sub Track > Disable . This step must not be skipped. Find a suitable spot in the video of which you want to take a screenshot. To take the screenshot, press Shift + S or go to the Menu bar > Video > Take Snapshot . The screenshot should now be saved in the directory set in the Preferences. Visual Animated Guide: Click here Bug where using version 2.1.5 is needed: Some rare/old DVDs are improperly authored where the video plays in Storage Resolution (instead of Display Resolution) on most players, including latest VLC. Thus, the video playback and/or the screenshots are in bad aspect ratio. Many such DVDs will have a discrepancy in the Display aspect ratio between the main IFO file and the corresponding VOB files. See this screenshot for an example. Properly authored DVDs should have the same value for Aspect ratio in both the IFO and the VOB. VLC 2.1.5 is usually able to play such DVDs properly. You do not need to install this old version on your system. You can just download the portable version from the Version 2.1.5 link given at the top. Download the 7z or zip file instead of the exe. Important: You must load the DVD in VLC 2.1.5 as a disc for it to work properly. Opening the VOB file directly will once again give you bad aspect ratio screenshots. To load the folder as a disc, press Ctrl + D or go to the Menu bar > Media > Open Disc . See this screenshot for help. MPC-HC # Official Webpage Do NOT download from mpc-hc.org . That is an old build which is no longer updated. Setting up MPC-HC: # Two main video renderer options: Enhanced Video Renderer (custom presenter) and madVR . EVR (custom presenter) is what MPC-HC comes with by default, while madVR can be optionally installed for better quality. To change the setting for the video renderer, press O or go to the Menu bar > View > Options . Then click on Output in the sidebar. The renderer options will be in a dropdown under DirectShow Video . See this screenshot for help. You need to restart MPC-HC if you switch the renderer. EVR (custom presenter) does not need any special setup. For madVR: Open any video and pause it, then right click on the video, select Filters > madVR . Then click on Edit Settings . In the madVR settings window, go to rendering > screenshots , select the checkbox for create screenshots with a custom zoom factor , and then select the encoded video size option. Also ensure that the don't draw subtitles and don't draw OSD boxes are checked. Visual Animated Guide: Click here Taking the screenshots: # Open the video by either pressing Ctrl + Q , or by going to the Menu bar > File > Quick Open File , or by simply dragging and dropping the file inside the player window. Find a suitable spot in the video of which you want to take a screenshot. To take the screenshot, press Alt + I or go to the Menu bar > File > Save Image . If you are using EVR (custom presenter), you must uncheck the Include Subtitles box when saving the image. When using madVR, that box does not appear at all. Visual Animated Guide: Click here FFmpeg # Official Webpage Installing or setting up FFmpeg will not be covered here because plenty of tutorials can be found from a Google search. Try any of these tutorials for example: Windows: https://windowsloop.com/install-ffmpeg-windows-10/ https://www.thewindowsclub.com/how-to-install-ffmpeg-on-windows-10 https://www.wikihow.com/Install-FFmpeg-on-Windows Mac OS: https://trac.ffmpeg.org/wiki/CompilationGuide/macOS https://superuser.com/questions/624561/install-ffmpeg-on-os-x http://jollejolles.com/install-ffmpeg-on-mac-os-x/ https://bbc.github.io/bbcat-orchestration-docs/installation-mac/ (the latter part) Introduction: # FFmpeg is an incredibly powerful program with a myriad of command line parameters available to manipulate various multimedia formats. Being a command line program makes FFmpeg a good choice for scripting. But currently, there is no good and comprehensive bash script for taking screenshots using FFmpeg that accounts for the necessary color matrix conversions to ensure color-accurate screenshots. Therefore, only the standalone commands are being covered below, which means you will need to manually select the proper command for the type of file you have, and you will also need to manually change the timestamp and filename when taking multiple screenshots. Taking the screenshots: # Each example command below takes a screenshot of the file input.mkv at 5m30s mark with the filename screenshot1.png Blu-ray and other HD sources; UHD Blu-ray (SDR): BT.709 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=128:flags=spline:in_color_matrix=bt709:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png What falls under the BT.709 color space? Almost all HD files, including those sourced from Blu-ray, HDTV and WEB-DLs. Many UHD files that are NOT HDR. Be careful with files from SDR UHD Blu-rays. Most of them are BT.709, but some rare ones are BT.2020. Check the file's mediainfo under Matrix coefficients to know the proper color matrix. Almost all SD files sourced from Blu-ray. Check if the Matrix coefficients in mediainfo says BT.709. If the Matrix coefficients field is missing entirely, the file can be assumed to be BT.709, as long as it's sourced from Blu-ray and not DVD. DVD and other SD sources: BT.601 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=128:flags=spline:in_color_matrix=bt601:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png What falls under the BT.601 color space? In addition to DVDs, almost all other SD sources like VHS, LaserDisc, TV. Some groups encode SD files sourced from Blu-ray with a color conversion from BT.709 to BT.601. Such BT.601 files will say either BT.601 or BT.470 System B/G under Matrix coefficients in mediainfo. UHD Blu-ray (HDR) and HDR WEB-DL sources: BT.2020 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=0:flags=spline:in_color_matrix=bt2020:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png Note about bloated screenshots With default settings, FFmpeg generates 16-bit PNG images whenever the video is 10-bit. The above commands force the PNG to be 8-bit, which is recommended because 16-bit PNGs can be more than 5 times bigger for identical or almost identical quality. If you wish to generate 16-bit PNGs, remove -pix_fmt rgb24 from the commands. AviSynth+ (with AvsPmod) # How to set up AviSynth+ and AvsPmod is beyond the scope of this wiki. You should be using AviSynth+ and AvsPmod GPo build . For the decoder, L-SMASH-Works , ffms2 or DGDecNV should be used. d2vsource can be used for MPEG-2 sources like DVDs. Taking the screenshots: # Create the following script in AvsPmod and save the image by right clicking on the video and selecting Save image as... BT.709 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec709\") BT.601 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec601\") BT.2020 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec2020\") Replace LWLibavVideoSource with FFVideoSource if you are using ffms2. And so on for the other decoders. For anamorphic files For anamorphic files , add the following line after importing the file. This will resize the video from the storage to the display resolution. z_ConvertFormat(FFSAR_NUM > FFSAR_DEN ? 2 * round(Float(Width) * FFSAR_NUM / FFSAR_DEN / 2) : Width, FFSAR_NUM < FFSAR_DEN ? 2 * round(Height * FFSAR_DEN / FFSAR_NUM / 2) : Height, resample_filter=\"spline36\", dither_type=\"error_diffusion\") Alternatively, if you already know what the display resolution of the file is supposed to be, use the following: z_ConvertFormat(width, height, resample_filter=\"spline36\", dither_type=\"error_diffusion\") Replace width and height with the proper dimensions. Each dimension needs to be a multiple of 2. Remember that this line needs to come before the ConvertToRGB line. VapourSynth # For the decoder, L-SMASH-Works , ffms2 or DGDecNV should be used. d2vsource can be used for MPEG-2 sources like DVDs. About SetFrameProp The following scripts have a SetFrameProp line inserted to explicitly set the color matrix of the video, unless the video is already tagged with a color matrix. Set intval to 1 for BT.709, 5 for BT.601, and 9 for BT.2020. The color matrix values have been taken from VapourSynth's documentation . Look at the table titled Matrix coefficients (ITU-T H.265 Table E.5) . Script: # import vapoursynth as vs core = vs . core src = core . lsmas . LWLibavSource ( 'input.mkv' ) if src . get_frame ( 0 ) . props [ '_Matrix' ] == 2 : # Matrix value of 2 means unspecified matrix src = core . std . SetFrameProp ( src , prop = \"_Matrix\" , intval = 1 ) src . set_output () For anamorphic files For anamorphic files , define the following function in your script to resize the video from the storage to the display resolution. def resizeDAR ( clip : vs . VideoNode ) -> vs . VideoNode : f = clip . get_frame ( 0 ) # Assume the first frame is representative of the whole stream if '_SARDen' in f . props and '_SARNum' in f . props : ffsar_num = float ( f . props [ '_SARNum' ]) ffsar_den = float ( f . props [ '_SARDen' ]) # Resize, if necessary if ffsar_num == ffsar_den : return clip # No modification if the clip isn't anamorphic elif ffsar_num > ffsar_den : output_width = round ( float ( clip . width ) * ffsar_num / ffsar_den ) output_height = clip . height else : output_width = clip . width output_height = round ( float ( clip . height ) * ffsar_den / ffsar_num ) return core . resize . Spline36 ( clip , width = output_width , height = output_height , dither_type = 'error_diffusion' ) This function can now be used to resize any clip to display resolution by using src = resizeDAR(src) Alternatively, if you already know what the display resolution of the file is supposed to be, use the following: src = core.resize.Spline36(src, width=XXX, height=YYY, dither_type='error_diffusion') Replace XXX and YYY with the proper dimensions. Each dimension needs to be a multiple of 2. Load the script and save the images using your previewer of choice, whether it is VSEdit , vspreview , or something else. Even AvsPmod GPo has reasonably good support for VapourSynth scripts. Also refer to the silentaperture guide for some neat tips and functions regarding screenshots in VapourSynth. Further reading material: # https://wiki.videolan.org/Documentation:Snapshots/ https://mpv.io/manual/master/#screenshot http://wiki.bakabt.me/index.php/Screenshots https://scribbleghost.net/2018/12/28/how-to-export-thumbnail-images-with-ffmpeg/","title":"Programs to Take Screenshots"},{"location":"video/screenshots/programs-choices/#different-programs-to-take-screenshots","text":"","title":" Different Programs to Take Screenshots"},{"location":"video/screenshots/programs-choices/#mpv","text":"Official Webpage mpv.net (Windows GUI)","title":"mpv"},{"location":"video/screenshots/programs-choices/#setting-up-mpv","text":"First, we need to create a configuration file for storing mpv's settings. See this page from the mpv docs about configuration files and their location. Windows: the conf file should be at %APPDATA%\\mpv\\mpv.conf Mac and Linux: ~/.config/mpv/mpv.conf Create an empty mpv.conf file if it doesn't exist. Copy paste the following code inside the conf file. Change the screenshot-directory from D:\\ to your desired path. screenshot-format =png screenshot-directory =\"D : \\\" # Save screenshots in the pattern of 'filename-timestamp.png' screenshot-template =\"%F-%p\" # Deactivate debanding --deband =no # Always use 8-bit depth to keep file size reasonable --screenshot-high-bit-depth =no","title":"Setting up mpv:"},{"location":"video/screenshots/programs-choices/#setting-up-mpvnet","text":"If you prefer to use mpv.net , the Windows GUI fork, you can change its settings by pressing c or right clicking inside the window > Settings > Show Config Editor . Type \"screenshot\" in the search box. Set screenshot-directory to your desired folder, screenshot-format to png , screenshot-high-bit-depth to no , and screenshot-template to %F-%p . Visual Guide: Click here","title":"Setting up mpv.net:"},{"location":"video/screenshots/programs-choices/#taking-the-screenshots","text":"Drag and drop your file inside mpv's window. Find a suitable spot in the video of which you want to take a screenshot. Press Shift + S to take the screenshot. If you press lowercase s, the screenshot will be taken with subtitles enabled. mpv.net does not appear to support Shift + S , so remember to turn off the subtitles before pressing lowercase s.","title":"Taking the screenshots:"},{"location":"video/screenshots/programs-choices/#vlc-media-player","text":"Official Webpage Version 2.1.5 Info The latest version of VLC takes screenshots correctly in display resolution for most types of files. But some DVDs authored with improper aspect ratio play properly only in VLC 2.1.5. See the section at the end for more details. Versions 2.2.0 to 2.2.4 take screenshots at storage resolution for all files, so they cannot be used for anamorphic files. However, VLC fails at taking screenshots using the proper color matrix conversions, resulting in screenshots with inaccurate colors. Therefore, it is advised to keep VLC as a backup option. Try one of the other programs on this page first for color-accurate screenshots.","title":"VLC Media Player"},{"location":"video/screenshots/programs-choices/#setting-up-vlc","text":"Press Ctrl + P or go to the Menu bar, then Tools > Preferences > Video tab. Under the Format dropdown, ensure that png is selected. On the same Video tab, it is also recommended to set Deinterlacing to Off. Make a note of the folder the Directory option is set at, or change it if you wish. This is where VLC will save the screenshots.","title":"Setting up VLC:"},{"location":"video/screenshots/programs-choices/#taking-the-screenshots_1","text":"Open the video by either pressing Ctrl + O , or by going to the Menu bar > Media > Open File , or by simply dragging and dropping the file inside the player window. VLC also works well for streaming a file from your seedbox/server with http(s). To load a remote file, press Ctrl + N or click on the Menu bar > Media > Open Network Stream . You can also just copy the URL of the file in your browser, then switch to the VLC window, and press Ctrl + V . Ensure that any soft subtitles are turned off by going to the Menu bar > Subtitle > Sub Track > Disable . This step must not be skipped. Find a suitable spot in the video of which you want to take a screenshot. To take the screenshot, press Shift + S or go to the Menu bar > Video > Take Snapshot . The screenshot should now be saved in the directory set in the Preferences. Visual Animated Guide: Click here Bug where using version 2.1.5 is needed: Some rare/old DVDs are improperly authored where the video plays in Storage Resolution (instead of Display Resolution) on most players, including latest VLC. Thus, the video playback and/or the screenshots are in bad aspect ratio. Many such DVDs will have a discrepancy in the Display aspect ratio between the main IFO file and the corresponding VOB files. See this screenshot for an example. Properly authored DVDs should have the same value for Aspect ratio in both the IFO and the VOB. VLC 2.1.5 is usually able to play such DVDs properly. You do not need to install this old version on your system. You can just download the portable version from the Version 2.1.5 link given at the top. Download the 7z or zip file instead of the exe. Important: You must load the DVD in VLC 2.1.5 as a disc for it to work properly. Opening the VOB file directly will once again give you bad aspect ratio screenshots. To load the folder as a disc, press Ctrl + D or go to the Menu bar > Media > Open Disc . See this screenshot for help.","title":"Taking the screenshots:"},{"location":"video/screenshots/programs-choices/#mpc-hc","text":"Official Webpage Do NOT download from mpc-hc.org . That is an old build which is no longer updated.","title":"MPC-HC"},{"location":"video/screenshots/programs-choices/#setting-up-mpc-hc","text":"Two main video renderer options: Enhanced Video Renderer (custom presenter) and madVR . EVR (custom presenter) is what MPC-HC comes with by default, while madVR can be optionally installed for better quality. To change the setting for the video renderer, press O or go to the Menu bar > View > Options . Then click on Output in the sidebar. The renderer options will be in a dropdown under DirectShow Video . See this screenshot for help. You need to restart MPC-HC if you switch the renderer. EVR (custom presenter) does not need any special setup. For madVR: Open any video and pause it, then right click on the video, select Filters > madVR . Then click on Edit Settings . In the madVR settings window, go to rendering > screenshots , select the checkbox for create screenshots with a custom zoom factor , and then select the encoded video size option. Also ensure that the don't draw subtitles and don't draw OSD boxes are checked. Visual Animated Guide: Click here","title":"Setting up MPC-HC:"},{"location":"video/screenshots/programs-choices/#taking-the-screenshots_2","text":"Open the video by either pressing Ctrl + Q , or by going to the Menu bar > File > Quick Open File , or by simply dragging and dropping the file inside the player window. Find a suitable spot in the video of which you want to take a screenshot. To take the screenshot, press Alt + I or go to the Menu bar > File > Save Image . If you are using EVR (custom presenter), you must uncheck the Include Subtitles box when saving the image. When using madVR, that box does not appear at all. Visual Animated Guide: Click here","title":"Taking the screenshots:"},{"location":"video/screenshots/programs-choices/#ffmpeg","text":"Official Webpage Installing or setting up FFmpeg will not be covered here because plenty of tutorials can be found from a Google search. Try any of these tutorials for example: Windows: https://windowsloop.com/install-ffmpeg-windows-10/ https://www.thewindowsclub.com/how-to-install-ffmpeg-on-windows-10 https://www.wikihow.com/Install-FFmpeg-on-Windows Mac OS: https://trac.ffmpeg.org/wiki/CompilationGuide/macOS https://superuser.com/questions/624561/install-ffmpeg-on-os-x http://jollejolles.com/install-ffmpeg-on-mac-os-x/ https://bbc.github.io/bbcat-orchestration-docs/installation-mac/ (the latter part)","title":"FFmpeg"},{"location":"video/screenshots/programs-choices/#introduction","text":"FFmpeg is an incredibly powerful program with a myriad of command line parameters available to manipulate various multimedia formats. Being a command line program makes FFmpeg a good choice for scripting. But currently, there is no good and comprehensive bash script for taking screenshots using FFmpeg that accounts for the necessary color matrix conversions to ensure color-accurate screenshots. Therefore, only the standalone commands are being covered below, which means you will need to manually select the proper command for the type of file you have, and you will also need to manually change the timestamp and filename when taking multiple screenshots.","title":"Introduction:"},{"location":"video/screenshots/programs-choices/#taking-the-screenshots_3","text":"Each example command below takes a screenshot of the file input.mkv at 5m30s mark with the filename screenshot1.png Blu-ray and other HD sources; UHD Blu-ray (SDR): BT.709 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=128:flags=spline:in_color_matrix=bt709:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png What falls under the BT.709 color space? Almost all HD files, including those sourced from Blu-ray, HDTV and WEB-DLs. Many UHD files that are NOT HDR. Be careful with files from SDR UHD Blu-rays. Most of them are BT.709, but some rare ones are BT.2020. Check the file's mediainfo under Matrix coefficients to know the proper color matrix. Almost all SD files sourced from Blu-ray. Check if the Matrix coefficients in mediainfo says BT.709. If the Matrix coefficients field is missing entirely, the file can be assumed to be BT.709, as long as it's sourced from Blu-ray and not DVD. DVD and other SD sources: BT.601 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=128:flags=spline:in_color_matrix=bt601:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png What falls under the BT.601 color space? In addition to DVDs, almost all other SD sources like VHS, LaserDisc, TV. Some groups encode SD files sourced from Blu-ray with a color conversion from BT.709 to BT.601. Such BT.601 files will say either BT.601 or BT.470 System B/G under Matrix coefficients in mediainfo. UHD Blu-ray (HDR) and HDR WEB-DL sources: BT.2020 color space ffmpeg -ss 00:05:30.000 -i input.mkv -vf scale=in_h_chr_pos=0:in_v_chr_pos=0:flags=spline:in_color_matrix=bt2020:flags=full_chroma_int+accurate_rnd -pix_fmt rgb24 -vframes 1 screenshot1.png Note about bloated screenshots With default settings, FFmpeg generates 16-bit PNG images whenever the video is 10-bit. The above commands force the PNG to be 8-bit, which is recommended because 16-bit PNGs can be more than 5 times bigger for identical or almost identical quality. If you wish to generate 16-bit PNGs, remove -pix_fmt rgb24 from the commands.","title":"Taking the screenshots:"},{"location":"video/screenshots/programs-choices/#avisynth-with-avspmod","text":"How to set up AviSynth+ and AvsPmod is beyond the scope of this wiki. You should be using AviSynth+ and AvsPmod GPo build . For the decoder, L-SMASH-Works , ffms2 or DGDecNV should be used. d2vsource can be used for MPEG-2 sources like DVDs.","title":"AviSynth+ (with AvsPmod)"},{"location":"video/screenshots/programs-choices/#taking-the-screenshots_4","text":"Create the following script in AvsPmod and save the image by right clicking on the video and selecting Save image as... BT.709 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec709\") BT.601 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec601\") BT.2020 video: LWLibavVideoSource(\"input.mkv\") ConvertToRGB(matrix=\"Rec2020\") Replace LWLibavVideoSource with FFVideoSource if you are using ffms2. And so on for the other decoders. For anamorphic files For anamorphic files , add the following line after importing the file. This will resize the video from the storage to the display resolution. z_ConvertFormat(FFSAR_NUM > FFSAR_DEN ? 2 * round(Float(Width) * FFSAR_NUM / FFSAR_DEN / 2) : Width, FFSAR_NUM < FFSAR_DEN ? 2 * round(Height * FFSAR_DEN / FFSAR_NUM / 2) : Height, resample_filter=\"spline36\", dither_type=\"error_diffusion\") Alternatively, if you already know what the display resolution of the file is supposed to be, use the following: z_ConvertFormat(width, height, resample_filter=\"spline36\", dither_type=\"error_diffusion\") Replace width and height with the proper dimensions. Each dimension needs to be a multiple of 2. Remember that this line needs to come before the ConvertToRGB line.","title":"Taking the screenshots:"},{"location":"video/screenshots/programs-choices/#vapoursynth","text":"For the decoder, L-SMASH-Works , ffms2 or DGDecNV should be used. d2vsource can be used for MPEG-2 sources like DVDs. About SetFrameProp The following scripts have a SetFrameProp line inserted to explicitly set the color matrix of the video, unless the video is already tagged with a color matrix. Set intval to 1 for BT.709, 5 for BT.601, and 9 for BT.2020. The color matrix values have been taken from VapourSynth's documentation . Look at the table titled Matrix coefficients (ITU-T H.265 Table E.5) .","title":"VapourSynth"},{"location":"video/screenshots/programs-choices/#script","text":"import vapoursynth as vs core = vs . core src = core . lsmas . LWLibavSource ( 'input.mkv' ) if src . get_frame ( 0 ) . props [ '_Matrix' ] == 2 : # Matrix value of 2 means unspecified matrix src = core . std . SetFrameProp ( src , prop = \"_Matrix\" , intval = 1 ) src . set_output () For anamorphic files For anamorphic files , define the following function in your script to resize the video from the storage to the display resolution. def resizeDAR ( clip : vs . VideoNode ) -> vs . VideoNode : f = clip . get_frame ( 0 ) # Assume the first frame is representative of the whole stream if '_SARDen' in f . props and '_SARNum' in f . props : ffsar_num = float ( f . props [ '_SARNum' ]) ffsar_den = float ( f . props [ '_SARDen' ]) # Resize, if necessary if ffsar_num == ffsar_den : return clip # No modification if the clip isn't anamorphic elif ffsar_num > ffsar_den : output_width = round ( float ( clip . width ) * ffsar_num / ffsar_den ) output_height = clip . height else : output_width = clip . width output_height = round ( float ( clip . height ) * ffsar_den / ffsar_num ) return core . resize . Spline36 ( clip , width = output_width , height = output_height , dither_type = 'error_diffusion' ) This function can now be used to resize any clip to display resolution by using src = resizeDAR(src) Alternatively, if you already know what the display resolution of the file is supposed to be, use the following: src = core.resize.Spline36(src, width=XXX, height=YYY, dither_type='error_diffusion') Replace XXX and YYY with the proper dimensions. Each dimension needs to be a multiple of 2. Load the script and save the images using your previewer of choice, whether it is VSEdit , vspreview , or something else. Even AvsPmod GPo has reasonably good support for VapourSynth scripts. Also refer to the silentaperture guide for some neat tips and functions regarding screenshots in VapourSynth.","title":"Script:"},{"location":"video/screenshots/programs-choices/#further-reading-material","text":"https://wiki.videolan.org/Documentation:Snapshots/ https://mpv.io/manual/master/#screenshot http://wiki.bakabt.me/index.php/Screenshots https://scribbleghost.net/2018/12/28/how-to-export-thumbnail-images-with-ffmpeg/","title":" Further reading material:"}]}